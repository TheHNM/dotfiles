<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Add spotify module - dotfiles - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="dotfiles Atom Feed" href="../atom.xml" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>
<table><tr><td><a href="../../"><img src="../logo.png" alt="" width="32" height="32" /></a></td><td><h1>dotfiles</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../log.html">Log</a> | <a href="../files.html">Files</a> | <a href="../refs.html">Refs</a> | <a href="../file/README.md.html">README</a> | <a href="../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<pre><b>commit</b> <a href="../commit/cb132995e5b29daac79e7c558a4a6b5f1460d3ea.html">cb132995e5b29daac79e7c558a4a6b5f1460d3ea</a>
<b>parent</b> <a href="../commit/fb571f0b213899f55e5e00450e1efd544ee9b0d8.html">fb571f0b213899f55e5e00450e1efd544ee9b0d8</a>
<b>Author:</b> thehnm &lt;<a href="mailto:hngnm@pm.me">hngnm@pm.me</a>&gt;
<b>Date:</b>   Tue, 30 Oct 2018 09:40:06 +0100

Add spotify module

<b>Diffstat:</b>
<table><tr><td class="M">M</td><td><a href="#h0">config.stow/.config/polybar/config</a></td><td> | </td><td class="num">10</td><td><span class="i">++++++++</span><span class="d">--</span></td></tr>
<tr><td class="A">A</td><td><a href="#h1">config.stow/.config/polybar/spotify.sh</a></td><td> | </td><td class="num">23</td><td><span class="i">+++++++++++++++++++++++</span><span class="d"></span></td></tr>
</table></pre><pre>2 files changed, 31 insertions(+), 2 deletions(-)
<hr/><b>diff --git a/<a id="h0" href="../file/config.stow/.config/polybar/config.html">config.stow/.config/polybar/config</a> b/<a href="../file/config.stow/.config/polybar/config.html">config.stow/.config/polybar/config</a></b>
<a href="#h0-0" id="h0-0" class="h">@@ -37,7 +37,7 @@ border-size = 0
</a> border-color = ${colors.transparent}
 
 padding-left = 2
<a href="#h0-0-3" id="h0-0-3" class="d">-padding-right = 0
</a><a href="#h0-0-4" id="h0-0-4" class="i">+padding-right = 2
</a> 
 module-margin-left = 1
 module-margin-right = 2
<a href="#h0-1" id="h0-1" class="h">@@ -49,7 +49,7 @@ font-3 = &quot;Font Awesome 5 Brands:pixelsize=12;3&quot;
</a> 
 modules-left = i3 alsa eth wlan vpn battery time date
 modules-center =
<a href="#h0-1-3" id="h0-1-3" class="d">-modules-right =
</a><a href="#h0-1-4" id="h0-1-4" class="i">+modules-right = spotify
</a> 
 ;override-redirect = true
 
<a href="#h0-2" id="h0-2" class="h">@@ -180,3 +180,9 @@ ramp-capacity-1 = 
</a> ramp-capacity-2 = 
 ramp-capacity-3 = 
 ramp-capacity-4 = 
<a href="#h0-2-3" id="h0-2-3" class="i">+
</a><a href="#h0-2-4" id="h0-2-4" class="i">+[module/spotify]
</a><a href="#h0-2-5" id="h0-2-5" class="i">+type = custom/script
</a><a href="#h0-2-6" id="h0-2-6" class="i">+exec = ~/.config/polybar/spotify.sh %artist% - %title%
</a><a href="#h0-2-7" id="h0-2-7" class="i">+tail = true
</a><a href="#h0-2-8" id="h0-2-8" class="i">+interval = 2
</a><b>diff --git a/<a id="h1" href="../file/config.stow/.config/polybar/spotify.sh.html">config.stow/.config/polybar/spotify.sh</a> b/<a href="../file/config.stow/.config/polybar/spotify.sh.html">config.stow/.config/polybar/spotify.sh</a></b>
<a href="#h1-0" id="h1-0" class="h">@@ -0,0 +1,23 @@
</a><a href="#h1-0-0" id="h1-0-0" class="i">+#!/bin/sh
</a><a href="#h1-0-1" id="h1-0-1" class="i">+
</a><a href="#h1-0-2" id="h1-0-2" class="i">+main() {
</a><a href="#h1-0-3" id="h1-0-3" class="i">+  if ! pgrep -x spotify &gt;/dev/null; then
</a><a href="#h1-0-4" id="h1-0-4" class="i">+    echo &quot;&quot;; exit
</a><a href="#h1-0-5" id="h1-0-5" class="i">+  fi
</a><a href="#h1-0-6" id="h1-0-6" class="i">+
</a><a href="#h1-0-7" id="h1-0-7" class="i">+  cmd=&quot;org.freedesktop.DBus.Properties.Get&quot;
</a><a href="#h1-0-8" id="h1-0-8" class="i">+  domain=&quot;org.mpris.MediaPlayer2&quot;
</a><a href="#h1-0-9" id="h1-0-9" class="i">+  path=&quot;/org/mpris/MediaPlayer2&quot;
</a><a href="#h1-0-10" id="h1-0-10" class="i">+
</a><a href="#h1-0-11" id="h1-0-11" class="i">+  meta=$(dbus-send --print-reply --dest=${domain}.spotify \
</a><a href="#h1-0-12" id="h1-0-12" class="i">+    /org/mpris/MediaPlayer2 org.freedesktop.DBus.Properties.Get string:${domain}.Player string:Metadata)
</a><a href="#h1-0-13" id="h1-0-13" class="i">+
</a><a href="#h1-0-14" id="h1-0-14" class="i">+  artist=$(echo &quot;$meta&quot; | sed -nr &#39;/xesam:artist&quot;/,+2s/^ +string &quot;(.*)&quot;$/\1/p&#39; | tail -1  | sed &#39;s/\&amp;/\\&amp;/g&#39; | sed &#39;s#\/#\\/#g&#39;)
</a><a href="#h1-0-15" id="h1-0-15" class="i">+  album=$(echo &quot;$meta&quot; | sed -nr &#39;/xesam:album&quot;/,+2s/^ +variant +string &quot;(.*)&quot;$/\1/p&#39; | tail -1| sed &#39;s/\&amp;/\\&amp;/g&#39;| sed &#39;s#\/#\\/#g&#39;)
</a><a href="#h1-0-16" id="h1-0-16" class="i">+  title=$(echo &quot;$meta&quot; | sed -nr &#39;/xesam:title&quot;/,+2s/^ +variant +string &quot;(.*)&quot;$/\1/p&#39; | tail -1 | sed &#39;s/\&amp;/\\&amp;/g&#39;| sed &#39;s#\/#\\/#g&#39;)
</a><a href="#h1-0-17" id="h1-0-17" class="i">+
</a><a href="#h1-0-18" id="h1-0-18" class="i">+  echo &quot;${*:-%artist% - %title%}&quot; | sed &quot;s/%artist%/$artist/g;s/%title%/$title/g;s/%album%/$album/g&quot;i | sed &quot;s/\&amp;/\&amp;/g&quot; | sed &quot;s#\/#\/#g&quot;
</a><a href="#h1-0-19" id="h1-0-19" class="i">+
</a><a href="#h1-0-20" id="h1-0-20" class="i">+}
</a><a href="#h1-0-21" id="h1-0-21" class="i">+
</a><a href="#h1-0-22" id="h1-0-22" class="i">+main &quot;$@&quot;
</a></pre>
</div>
</body>
</html>
